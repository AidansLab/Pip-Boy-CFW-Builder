window.Patches.CameraModule = {
    
    // 'insert' objects are injected at insertion markers
    insert: {
        CameraFunction: `
if (!settings.camera) {
    settings.camera = {
        contrast: 0,
        brightness: 0,
        corruption: false
    };
}
let pictures = 0;
let submenuCamera = () =>
{
    const KNOB_LEFT = 'knob1';
    const KNOB_RIGHT = 'knob2';
    const BTN_TOP = 'torch';

    let lastTuneButtonState = false;
    let lastTuneUpState = false;
    let lastTuneDownState = false;

    let powerButtonWatch = null;

    let contrast = 0;
    let brightness = 0;

    let imageArray = null;

    function buildImageArray()
    {
        imageArray = fs.readdir("IMGS");
        imageArray.shift();
        imageArray.shift();
        //console.log(imageArray);
        fileCount = imageArray.length-1;
        fileIndex = fileCount;
    }

    buildImageArray();

    let deleteState = false;
    let deleteSelect = false;

    let ThrobberInterval = null;
    let ThrobberTimeout = null;
    let Throbbers = {
        open: "\\x64\\x64\\x81\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x7f\\xf0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x8f\\xff\\xf0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x71\\xff\\xff\\xe0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x1f\\x1f\\xff\\xff\\x80\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x07\\xe3\\xff\\xff\\xfe\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\xfe\\x3f\\xff\\xff\\xf8\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x3f\\xc7\\xff\\xff\\xff\\xc0\\x00\\x00\\x00\\x00\\x00\\x00\\x0f\\xf8\\xff\\xff\\xff\\xff\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\xff\\x8f\\xff\\xff\\xff\\xf8\\x00\\x00\\x00\\x00\\x00\\x00\\x3f\\xf1\\xff\\xff\\xff\\xff\\xc0\\x00\\x00\\x00\\x00\\x00\\x07\\xff\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xff\\xe0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x1f\\xfc\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\xff\\xc0\\x00\\x00\\x00\\x3f\\xfc\\x00\\x00\\x00\\x00\\x00\\x3f\\xf8\\x00\\x00\\x00\\x01\\xff\\xc0\\x00\\x00\\x00\\x00\\x07\\xff\\x80\\x00\\x00\\x00\\x1f\\xfe\\x00\\x00\\x00\\x00\\x00\\xff\\xf0\\x00\\x00\\x00\\x00\\xff\\xf0\\x00\\x00\\x00\\x00\\x0f\\xff\\x00\\x00\\x00\\x00\\x0f\\xff\\x00\\x00\\x00\\x00\\x01\\xff\\xe0\\x00\\x00\\x00\\x00\\x7f\\xf8\\x00\\x00\\x00\\x00\\x1f\\xfc\\x00\\x00\\x00\\x00\\x03\\xff\\x80\\x00\\x00\\x00\\x03\\xff\\xc0\\x00\\x00\\x00\\x00\\x3f\\xfc\\x00\\x00\\x00\\x00\\x3f\\xf8\\x00\\x00\\x00\\x00\\x01\\xff\\xc0\\x00\\x00\\x00\\x07\\xff\\x80\\x00\\x00\\x00\\x00\\x1f\\xfe\\x00\\x00\\x00\\x00\\x3f\\xf0\\x00\\x00\\x00\\x00\\x00\\xff\\xe0\\x00\\x00\\x00\\x01\\xfe\\x00\\x00\\x00\\x00\\x00\\x07\\xfe\\x00\\x00\\x00\\x00\\x1f\\xe0\\x00\\x00\\x00\\x00\\x00\\x7f\\xf0\\x00\\x00\\x00\\x08\\xfc\\x00\\x00\\x00\\x00\\x00\\x03\\xff\\x00\\x00\\x00\\x00\\x8f\\xc0\\x00\\x00\\x00\\x00\\x00\\x3f\\xf0\\x00\\x00\\x00\\x0c\\x78\\x00\\x00\\x00\\x00\\x00\\x01\\xff\\x00\\x00\\x00\\x01\\xc7\\x80\\x00\\x00\\x00\\x00\\x00\\x1f\\xf8\\x00\\x00\\x00\\x1e\\x30\\x00\\x00\\x00\\x00\\x00\\x00\\xff\\x80\\x00\\x00\\x01\\xe1\\x00\\x00\\x00\\x00\\x00\\x00\\x07\\xf8\\x00\\x00\\x00\\x1f\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x7f\\x80\\x00\\x00\\x01\\xf8\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\xf8\\x00\\x00\\x00\\x1f\\x80\\x00\\x00\\x00\\x00\\x00\\x00\\x3f\\x80\\x00\\x00\\x01\\xfc\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\xf8\\x00\\x00\\x00\\x1f\\xc0\\x00\\x00\\x00\\x00\\x00\\x00\\x1f\\x80\\x00\\x00\\x01\\xfe\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xf8\\x00\\x00\\x00\\x1f\\xe0\\x00\\x00\\x00\\x00\\x00\\x00\\xc7\\x80\\x00\\x00\\x01\\xff\\x00\\x00\\x00\\x00\\x00\\x00\\x0c\\x78\\x00\\x00\\x00\\x1f\\xf8\\x00\\x00\\x00\\x00\\x00\\x01\\xe3\\x80\\x00\\x00\\x00\\xff\\x80\\x00\\x00\\x00\\x00\\x00\\x1e\\x30\\x00\\x00\\x00\\x0f\\xfc\\x00\\x00\\x00\\x00\\x00\\x03\\xf1\\x00\\x00\\x00\\x00\\xff\\xc0\\x00\\x00\\x00\\x00\\x00\\x3f\\x00\\x00\\x00\\x00\\x0f\\xfe\\x00\\x00\\x00\\x00\\x00\\x07\\xf8\\x00\\x00\\x00\\x00\\x7f\\xe0\\x00\\x00\\x00\\x00\\x00\\xff\\xc0\\x00\\x00\\x00\\x07\\xff\\x00\\x00\\x00\\x00\\x00\\x0f\\xfc\\x00\\x00\\x00\\x00\\x7f\\xf8\\x00\\x00\\x00\\x00\\x01\\xff\\xe0\\x00\\x00\\x00\\x03\\xff\\x80\\x00\\x00\\x00\\x00\\x1f\\xfc\\x00\\x00\\x00\\x00\\x3f\\xfc\\x00\\x00\\x00\\x00\\x03\\xff\\xc0\\x00\\x00\\x00\\x01\\xff\\xc0\\x00\\x00\\x00\\x00\\x3f\\xf8\\x00\\x00\\x00\\x00\\x1f\\xfe\\x00\\x00\\x00\\x00\\x07\\xff\\x80\\x00\\x00\\x00\\x00\\xff\\xf0\\x00\\x00\\x00\\x00\\xff\\xf0\\x00\\x00\\x00\\x00\\x0f\\xff\\x00\\x00\\x00\\x00\\x0f\\xff\\x00\\x00\\x00\\x00\\x00\\x7f\\xf8\\x00\\x00\\x00\\x01\\xff\\xe0\\x00\\x00\\x00\\x00\\x03\\xff\\x80\\x00\\x00\\x00\\x1f\\xfc\\x00\\x00\\x00\\x00\\x00\\x3f\\xfc\\x00\\x00\\x00\\x03\\xff\\xc0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x3f\\xf8\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x07\\xff\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xff\\xe0\\x00\\x00\\x00\\x00\\x00\\x03\\xff\\xff\\xff\\xff\\x8f\\xfc\\x00\\x00\\x00\\x00\\x00\\x00\\x1f\\xff\\xff\\xff\\xf1\\xff\\x80\\x00\\x00\\x00\\x00\\x00\\x00\\xff\\xff\\xff\\xff\\x1f\\xf0\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\xff\\xff\\xff\\xe3\\xfc\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x1f\\xff\\xff\\xfc\\x7f\\x80\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x7f\\xff\\xff\\xc7\\xe0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\xff\\xff\\xf8\\xf8\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x07\\xff\\xff\\x8e\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0f\\xff\\xf1\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0f\\xfe\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00",
        closed: "\\x64\\x64\\x81\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x7f\\xf0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x8f\\xff\\xf0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x71\\xff\\xff\\xe0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x1f\\x1f\\xff\\xff\\x80\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x07\\xe3\\xff\\xff\\xfe\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\xfe\\x3f\\xff\\xff\\xf8\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x3f\\xc7\\xff\\xff\\xff\\xc0\\x00\\x00\\x00\\x00\\x00\\x00\\x0f\\xf8\\xff\\xff\\xff\\xff\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\xff\\x8f\\xff\\xff\\xff\\xf8\\x00\\x00\\x00\\x00\\x00\\x00\\x3f\\xf1\\xff\\xff\\xff\\xff\\xc0\\x00\\x00\\x00\\x00\\x00\\x07\\xff\\x1f\\xff\\xff\\xe0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xff\\xf1\\xff\\xff\\xf8\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x1f\\xff\\x1f\\xff\\xff\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\xff\\xf1\\xff\\xff\\xe1\\xff\\xfc\\x00\\x00\\x00\\x00\\x00\\x3f\\xff\\x1f\\xff\\xfc\\x7f\\xff\\xc0\\x00\\x00\\x00\\x00\\x07\\xff\\xf1\\xff\\xff\\x8f\\xff\\xfe\\x00\\x00\\x00\\x00\\x00\\xff\\xff\\x1f\\xff\\xf1\\xff\\xff\\xf0\\x00\\x00\\x00\\x00\\x0f\\xff\\xf9\\xff\\xfe\\x3f\\xff\\xff\\x00\\x00\\x00\\x00\\x01\\xff\\xff\\x8f\\xff\\xc7\\xff\\xff\\xf8\\x00\\x00\\x00\\x00\\x1f\\xff\\xf8\\xff\\xf8\\x7f\\xff\\xff\\x80\\x00\\x00\\x00\\x03\\xff\\xff\\x8f\\xff\\x8f\\xff\\xff\\xfc\\x00\\x00\\x00\\x00\\x3f\\xff\\xfc\\x7f\\xf1\\xff\\xff\\xff\\xc0\\x00\\x00\\x00\\x07\\xff\\xff\\xc7\\xfe\\x1f\\xff\\xff\\xfe\\x00\\x00\\x00\\x00\\x3f\\xff\\xfc\\x3f\\xe3\\xff\\xff\\xff\\xe0\\x00\\x00\\x00\\x01\\xff\\xff\\xe3\\xfc\\x7f\\xff\\xff\\xfe\\x00\\x00\\x00\\x00\\x1f\\xff\\xfe\\x1f\\xc7\\xff\\xff\\xff\\xf0\\x00\\x00\\x00\\x00\\xff\\xff\\xf1\\xf8\\xff\\xff\\xff\\xff\\x00\\x00\\x00\\x00\\x8f\\xff\\xff\\x0f\\x8f\\xff\\xff\\xff\\xf0\\x00\\x00\\x00\\x0c\\x7f\\xff\\xf8\\xf9\\xff\\xff\\xff\\xff\\x00\\x00\\x00\\x01\\xc7\\xff\\xff\\xc7\\x9f\\xff\\xff\\xff\\xf8\\x00\\x00\\x00\\x1e\\x3f\\xff\\xfe\\x31\\xe0\\x00\\xff\\xff\\x80\\x00\\x00\\x01\\xe1\\xff\\xff\\xe1\\x20\\x00\\x00\\xff\\xf8\\x00\\x00\\x00\\x1f\\x1f\\xff\\xff\\x10\\x00\\x00\\x01\\xff\\x80\\x00\\x00\\x01\\xf8\\xff\\xff\\xf8\\x07\\xff\\xf8\\x07\\xf8\\x00\\x00\\x00\\x1f\\x87\\xff\\xff\\xc0\\x7f\\xff\\xf8\\x3f\\x80\\x00\\x00\\x01\\xfc\\x07\\xff\\xfe\\x03\\xff\\xff\\xe1\\xf8\\x00\\x00\\x00\\x1f\\xf0\\x03\\xfc\\x00\\x8f\\xff\\xff\\x1f\\x80\\x00\\x00\\x01\\xff\\xc0\\x00\\x00\\xc8\\xff\\xff\\xf8\\xf8\\x00\\x00\\x00\\x1f\\xff\\xc0\\x00\\x78\\xc7\\xff\\xff\\x87\\x80\\x00\\x00\\x01\\xff\\xff\\xf9\\xff\\x9e\\x3f\\xff\\xfc\\x78\\x00\\x00\\x00\\x1f\\xff\\xff\\xff\\xf9\\xf1\\xff\\xff\\xe3\\x80\\x00\\x00\\x00\\xff\\xff\\xff\\xff\\x1f\\x1f\\xff\\xfe\\x30\\x00\\x00\\x00\\x0f\\xff\\xff\\xff\\xf3\\xf8\\xff\\xff\\xf1\\x00\\x00\\x00\\x00\\xff\\xff\\xff\\xfe\\x3f\\x8f\\xff\\xff\\x00\\x00\\x00\\x00\\x0f\\xff\\xff\\xff\\xe3\\xfc\\x7f\\xff\\xf8\\x00\\x00\\x00\\x00\\x7f\\xff\\xff\\xfc\\x7f\\xc7\\xff\\xff\\xc0\\x00\\x00\\x00\\x07\\xff\\xff\\xff\\xc7\\xfe\\x3f\\xff\\xfc\\x00\\x00\\x00\\x00\\x7f\\xff\\xff\\xf8\\xff\\xe3\\xff\\xff\\xe0\\x00\\x00\\x00\\x03\\xff\\xff\\xff\\x0f\\xff\\x1f\\xff\\xfc\\x00\\x00\\x00\\x00\\x3f\\xff\\xff\\xf1\\xff\\xf1\\xff\\xff\\xc0\\x00\\x00\\x00\\x01\\xff\\xff\\xfe\\x3f\\xff\\x1f\\xff\\xf8\\x00\\x00\\x00\\x00\\x1f\\xff\\xff\\xc3\\xff\\xf9\\xff\\xff\\x80\\x00\\x00\\x00\\x00\\xff\\xff\\xf8\\x7f\\xff\\x8f\\xff\\xf0\\x00\\x00\\x00\\x00\\x0f\\xff\\xff\\x0f\\xff\\xf8\\xff\\xff\\x00\\x00\\x00\\x00\\x00\\x7f\\xff\\xe1\\xff\\xff\\x8f\\xff\\xe0\\x00\\x00\\x00\\x00\\x03\\xff\\xfc\\x3f\\xff\\xf8\\xff\\xfc\\x00\\x00\\x00\\x00\\x00\\x3f\\xff\\x87\\xff\\xff\\xcf\\xff\\xc0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\xff\\xff\\xfc\\xff\\xf8\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x1f\\xff\\xff\\xcf\\xff\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x07\\xff\\xff\\xf8\\xff\\xe0\\x00\\x00\\x00\\x00\\x00\\x03\\xff\\xff\\xff\\xff\\x8f\\xfc\\x00\\x00\\x00\\x00\\x00\\x00\\x1f\\xff\\xff\\xff\\xf1\\xff\\x80\\x00\\x00\\x00\\x00\\x00\\x00\\xff\\xff\\xff\\xff\\x1f\\xf0\\x00\\x00\\x00\\x00\\x00\\x00\\x03\\xff\\xff\\xff\\xe3\\xfc\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x1f\\xff\\xff\\xfc\\x7f\\x80\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x7f\\xff\\xff\\xc7\\xe0\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x01\\xff\\xff\\xf8\\xf8\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x07\\xff\\xff\\x8e\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0f\\xff\\xf1\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x0f\\xfe\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00"
    };

    let busy = false;

    let palBuffer = new Uint16Array(16);
    let cR = 0, cG = 1, cB = 0; // Default to Green if settings are missing
    
    if (settings.color) {
        // Normalize 0-255 settings to 0.0-1.0
        cR = (settings.color.r !== undefined ? settings.color.r : 0) / 255;
        cG = (settings.color.g !== undefined ? settings.color.g : 255) / 255;
        cB = (settings.color.b !== undefined ? settings.color.b : 0) / 255;
    }

    // Populate the 16-color palette
    for (let i = 0; i < 16; i++) {
        // Map index 0-15 to 0.0-1.0 intensity
        let intensity = i / 15;
        
        // Create color using the system theme ratios
        palBuffer[i] = g.toColor(intensity * cR, intensity * cG, intensity * cB);
    }
    
    // Assign the generated palette to sysPalette
    const sysPalette = palBuffer;

    function drawPicture()
    {
        if(imageArray.length==0)
        {
            g.clearRect(0, 51, 480, 290);
            g.setFontMonofonto18().setFontAlign(0, 0).drawString("NO IMAGES", g.getWidth()/2, g.getHeight()/2);
            busy = false;
            return;
        }

        // Open the file
        const f = E.openFile("IMGS/"+imageArray[fileIndex], "r");

        if (!f)
        {
            g.clearRect(0, 51, 480, 290);
            //console.log("Image not found");
            f.close();
            busy = false;
            return;
        }

        if (fs.statSync("IMGS/"+imageArray[fileIndex]).size < 30000)
        {
            g.clearRect(0, 51, 480, 290);
            g.setFontAlign(0, 0);
            g.setFontMonofonto18().setFontAlign(0, 0).drawString("Image corrupt, try reconverting", g.getWidth()/2, g.getHeight()/2);
            f.close();
            busy = false;
            return;
        }

        //console.log(E.getSizeOf(imageArray));

        // Read Header (8 bytes)
        // [W_lo, W_hi, H_lo, H_hi, BPP, ...]
        const h = f.read(8);
        if (!h) { f.close(); return; }

        // Parse Width (16-bit LE) and Height (16-bit LE)
        // Espruino read() returns strings or Uint8Array depending on version/file
        // We convert to Uint8Array to be safe
        const header = E.toUint8Array(h);
        const imgW = header[0] | (header[1] << 8);
        const imgH = header[2] | (header[3] << 8);
        const bpp = header[4];

        // Calculate Centering
        // Screen is 400x210
        const screenW = g.getWidth(); 
        const screenH = g.getHeight(); // approx 210 for the buffer area

        const startX = Math.floor((screenW - imgW) / 2);
        const startY = Math.floor((screenH - imgH) / 2); // Vertical center

        // Setup Line Buffer
        // Calculate exact bytes per row: ceil(Width * 2 / 8)
        const bytesPerRow = Math.ceil(imgW * bpp / 8);

        // We create a temporary image object for a SINGLE line
        let lineImg = {
            width: imgW,
            height: 1,
            bpp: bpp,
            buffer: new ArrayBuffer(bytesPerRow),
            palette: sysPalette
        };
        let lineView = new Uint8Array(lineImg.buffer);

        let y = 0;
                
        // Draw 15 lines every 10ms. This prevents the "Execution Interrupted" error.
        let drawingInterval = setInterval(function() {
            for (let i = 0; i < 15; i++) {
                // Check if we are done
                if (y >= imgH) {
                    clearInterval(drawingInterval);
                    drawingInterval = null;
                    f.close();
                    busy = false;
                    lineView = undefined;
                    lineImg = undefined;
                    process.memory(true);
                    return; 
                }

                // Read and Draw
                let chunk = f.read(bytesPerRow);
                if (chunk) {
                    if (startY + y >= 0 && startY + y < screenH) {
                        lineView.set(E.toUint8Array(chunk));
                        g.drawImage(lineImg, startX, startY + y);
                    }
                }
                y++;
            }
        }, 10);
    }

    function bCCleanup()
    {
        if (bC) { bC.buffer = undefined; bC = undefined; }
        process.memory(true);
        E.defrag();
    }

    function updateImage()
    {
        busy = true;

        clearInterval(ThrobberInterval);
        ThrobberInterval = null;
        clearTimeout(ThrobberTimeout);
        ThrobberTimeout = null;
        //clearThrobberArea();
        
        drawPicture();
    }

    function updateImageFromCam()
    {
        buildImageArray();
        updateImage();
    }

    function clearThrobberArea()
    {
        g.clearRect(190, 110, 290, 210);
    }

    function startThrobber()
    {
        ThrobberInterval = setInterval(function ()
        {
            clearThrobberArea();
            g.drawImage(Throbbers.open, 190, 110);
            ThrobberTimeout = setTimeout(function() {
                clearThrobberArea();
                g.drawImage(Throbbers.closed, 190, 110);
            }, 400);
        }, 800);
    }

    function handlePowerButton()
    {
        saveSettings();
        if (g.reset) g.reset();
        removeButtonListeners();
        reset();
        E.reboot();
    }

    function removeButtonListeners()
    {
        Pip.removeAllListeners(KNOB_LEFT);
        Pip.removeAllListeners(KNOB_RIGHT);
        Pip.removeAllListeners(BTN_TOP);

        rd && rd.tuningInterval && clearInterval(rd.tuningInterval);
        rd = undefined;
        stationName = undefined;
        stationNameSegments = undefined;
        stationNameTemp = undefined;
    }

    function handleLeftKnob(dir)
    {
        if (busy) return;
        if (dir == 0)
        {
            if (busy) return;
            busy = true;
            console.log("Reconvert," + settings.camera.brightness + "," + settings.camera.contrast);
            g.clearRect(0, 51, 480, 290);
            startThrobber();
        } else {
            //console.log("Brightness: " + dir);
            CBupdate(0, dir);
        }
    }

    function handleRightKnob(dir)
    {
        if (busy) return;
        //console.log("Contrast: " + dir);
        CBupdate(1, dir);
    }

    function handleTopButton()
    {
        if (busy) return;

        if(fs.getFree().freeSectors-92<3)
        {
            g.clearRect(0, 51, 480, 290);
            g.setFontMonofonto18().setFontAlign(0, 0).drawString("NOT ENOUGH FREE SPACE ON SD", g.getWidth()/2, g.getHeight()/2);
            return;
        } else
        if(process.memory(false).free-6<600)
        {
            g.clearRect(0, 51, 480, 290);
            g.setFontMonofonto18().setFontAlign(0, 0).drawString("NOT ENOUGH MEMORY", g.getWidth()/2, g.getHeight()/2);
            return;
        }
        
        busy = true;
        console.log("TakePic," + settings.camera.brightness + "," + settings.camera.contrast + "," + settings.camera.corruption + "\\n");
        g.clearRect(0, 51, 480, 290);
        startThrobber();
    }

    function handleTuneUp()
    {
        if (busy) return;
        //console.log("PicUp");

        if(deleteState == true)
        {
            deleteSelect=!deleteSelect;
            //console.log(deleteSelect);
            deleteHighlight();
            return;
        }

        if ((fileIndex+1) <= fileCount) {
            fileIndex++;
            //console.log("PicUp: Switching to " + fileIndex);
            
            // Clear any previous throbbers/drawing and redraw
            updateImage();
        }
    }

    function handleTuneDown()
    {
        if (busy) return;
        //console.log("PicDown");

        if(deleteState == true)
        {
            deleteSelect=!deleteSelect;
            //console.log(deleteSelect);
            deleteHighlight();
            return;
        }

        // Only allow decrement if we are above 1
        if ((fileIndex-1) >= 0) {
            fileIndex--;
            //console.log("PicDown: Switching to " + fileIndex);
            
            // Clear any previous throbbers/drawing and redraw
            updateImage();
        }
    }

    function handleTuneButton()
    {
        if(busy) return;

        if(deleteState == true)
        {
            if(deleteSelect)
            {
                //console.log("Delete: " + imageArray[fileIndex]);
                deleteImage();
            } else {
                //console.log("Keep: " + imageArray[fileIndex]);
                drawPicture();
            }
            deleteState = false;
            return;
        }

        deleteState = true;
        deleteHighlight();
    }

    function deleteImage()
    {
        const success = fs.unlink("IMGS/"+imageArray[fileIndex]);
        if(!success) return;

        const lastIndex = fileIndex;

        buildImageArray();

        if(lastIndex <= fileCount)
        {
            fileIndex = lastIndex;
        }
        drawPicture();
    }

    function deleteHighlight()
    {
        if(deleteSelect)
        {
            g.setFontMonofonto28().setFontAlign(-1, 0);
            g.setColor(0, 10, 0);
            g.clearRect(40, (g.getHeight()/2)-14, 55+g.stringWidth("Delete Image"), g.getFontHeight()+70);
            g.drawString("Delete Image", 50, (g.getHeight()/2)-36);
            g.drawRect(41, (g.getHeight()/2)-14, 55+g.stringWidth("Delete Image"), g.getFontHeight()+70);
            g.drawRect(40, (g.getHeight()/2)-14-1, 56+g.stringWidth("Delete Image"), g.getFontHeight()+71);

            g.clearRect(40, (g.getHeight()/2)-14+60, 55+g.stringWidth("Delete Image"), g.getFontHeight()+70+60);
            g.drawString("Keep Image", 50, (g.getHeight()/2)-36+60);
            g.setColor(0, 0, 0);
            g.drawRect(41, (g.getHeight()/2)-14+60-1, 56+g.stringWidth("Delete Image"), g.getFontHeight()+70+61);
            g.drawRect(40, (g.getHeight()/2)-14+60-1, 56+g.stringWidth("Delete Image"), g.getFontHeight()+70+61);
            g.setColor(0, 10, 0);
        } else {
            g.setFontMonofonto28().setFontAlign(-1, 0);
            g.setColor(0, 10, 0);
            g.clearRect(40, (g.getHeight()/2)-14, 55+g.stringWidth("Delete Image"), g.getFontHeight()+70);
            g.drawString("Delete Image", 50, (g.getHeight()/2)-36);
            g.setColor(0, 0, 0);
            g.drawRect(41, (g.getHeight()/2)-14, 55+g.stringWidth("Delete Image"), g.getFontHeight()+70);
            g.drawRect(40, (g.getHeight()/2)-14-1, 56+g.stringWidth("Delete Image"), g.getFontHeight()+71);

            g.setColor(0, 10, 0);
            g.clearRect(40, (g.getHeight()/2)-14+60, 55+g.stringWidth("Delete Image"), g.getFontHeight()+70+60);
            g.drawString("Keep Image", 50, (g.getHeight()/2)-36+60);
            g.drawRect(41, (g.getHeight()/2)-14+60, 55+g.stringWidth("Delete Image"), g.getFontHeight()+70+60);
            g.drawRect(40, (g.getHeight()/2)-14+60-1, 56+g.stringWidth("Delete Image"), g.getFontHeight()+70+61);
        }
    }

    function CBupdate(knob, dir)
    {
        if (knob == 0) // Brightness
        {
            bH.setFontMonofonto28().setFontAlign(-1, -1).setColor(13);
            bH.clearRect(28, 0, 90, 49).flip();
            settings.camera.brightness += dir;
            bH.drawString(settings.camera.brightness, 28, 5).flip();
        } else if (knob == 1) // Contrast
        {
            bH.setFontMonofonto28().setFontAlign(1, -1).setColor(13);
            bH.clearRect(280, 0, 342, 49).flip();
            settings.camera.contrast += -dir;
            bH.drawString(settings.camera.contrast, 342, 5).flip();
        }
    }

    function DisplaySetup()
    {
        bH.clear().flip();
        if (bC !== undefined) { bC.clear().flip(); }
        bF.setBgColor(0).clear().flip();
        bH.setFontMonofonto36().setFontAlign(0, -1).setColor(13);
        bH.drawString("PIP-CAM", bH.getWidth()/2, 0).flip();

        bH.setFontMonofonto28().setFontAlign(-1, -1).setColor(13);
        bH.drawString("B:" + settings.camera.brightness, 0, 5).flip();
        bH.setFontMonofonto28().setFontAlign(1, -1).setColor(13);
        bH.drawString(settings.camera.contrast + ":C", 370, 5).flip();

        drawFooter();
        //bF.setFontMonofonto18().setFontAlign(0, -1).setColor(9);
        //bF.drawString("Press Power Button to Exit", bF.getWidth()/2, 0).flip();
    }

    function HandlerSetup()
    {
        removeButtonListeners();

        Pip.on(KNOB_LEFT, handleLeftKnob);
        Pip.on(KNOB_RIGHT, handleRightKnob);
        Pip.on(BTN_TOP, handleTopButton);

        Pip.on('updateImg', updateImageFromCam);
        Pip.on('takeFromCam', handleTopButton);

        buttonPollInterval = setInterval(function() {
            
            // 1. Tune/Play Button
            const stateTune = BTN_PLAY.read();
            if (stateTune && !lastTuneButtonState) {
                handleTuneButton();
            }
            lastTuneButtonState = stateTune;

            // 2. Tune Up
            const stateUp = BTN_TUNEUP.read();
            if (stateUp && !lastTuneUpState) {
                handleTuneUp();
            }
            lastTuneUpState = stateUp;

            // 3. Tune Down
            const stateDown = BTN_TUNEDOWN.read();
            if (stateDown && !lastTuneDownState) {
                handleTuneDown();
            }
            lastTuneDownState = stateDown;

        }, 100);

        powerButtonWatch = setWatch(
            function () {
              handlePowerButton();
            },
            BTN_POWER,
            {
              debounce: 50,
              edge: 'rising',
              repeat: true,
            },
        );
    }

    drawFooter = () =>
    {
    	let c = Pip.measurePin(VBAT_MEAS);
    	let d = 3.5,
    		f = 4.1;
        bF.clear().setFontMonofonto18().setFontAlign(0, -1).setColor(9);
        bF.drawString("Press Power Button to Exit", bF.getWidth()/2, 0).flip();
        bF.setFontAlign(1, -1);
    	VUSB_PRESENT.read() ? (bF.drawString("On", bF.getWidth()-10, ), CHARGE_STAT.read() == 0 && (d = 3.6, f = 4.2)) : (bF.drawString("Off", bF.getWidth()-10, ), c < 3.3 && Pip.sleeping === !1 && Pip.offOrSleep(
        {
            immediate: !1,
            forceOff: !0
        }));
        bF.flip();
    };

    Pip.remove();
    clearInterval();
    DisplaySetup();
    HandlerSetup();
    bCCleanup();
    drawPicture();
}
        `,
		
        Title: `
		, "PIP-CAM"
        `,

        Menu: `
		, submenuCamera
        `,
        Icon: `
        , "\\xc2\\x5e\\x30\\x50\\x3f\\xf8\\x03\\xf0\\x07\\xe0\\x0f\\xc0\\x1f\\x80\\x3f\\x00\\x7e\\x00\\xff\\xff\\xaa\\x10\\x41\\xbf\\x0f\\xbb\\xfe\\xd5\\x6b\\xc4\\x0e\\xfe\\xb5\\x42\\x17\\x75\\x3e\\xa1\\x00\\x28\\x56\\xc7\\xe1\\x00\\x02\\x42\\xb5\\xda\\x10\\x08\\x63\\x63\\xde\\xc2\\x04\\x00\\x26\\x9c\\x40\\xbf\\xac\\x40\\x36\\xac\\x40\\xbe\\xaa\\xb4\\x1d\\x0b\\x34\\xa5\\x68\\x7a\\x1e\\xa6\\x82\\x04\\x0b\\x3e\\x20\\x63\\x4b\\x5a\\xca\\xd5\\x6d\\x4a\\x56\\x43\\x20\\xe5\\xb5\\x26\\x50\\x6b\\x40\\x30\\x50\\x8b\\xfa\\x90\\x82\\x10\\xc1\\xab\\x08\\x18\\xd4\\x97\\x82\\x33\\x03\\x6a\\xd2\\xa9\\x57\\xfd\\x6a\\x5c\\xc2\\x88\\x81\\x10\\x2d\\xd6\\xcb\\x08\\x05\\x24\\x02\\x20\\x59\\x86\\x08\\x80\\x7d\\xf8\\x81\\x50\\xc0\\x28\\x30\\x90\\x00\\x80\\x82\\x10\\x2d\\xa5\\x3e\\x02\\x1d\\x07\\x48\\x03\\x04\\xd2\\x08\\x81\\x6f\\x30\\x80\\x33\\x38\\x42\\x00\\x6f\\xe1\\x93\\x86\\x23\\x75\\x90\\x22\\x66\\x8c\\x41\\x07\\xce\\xff\\x6a\\xb5\\x60\\x71\\x3e\\xca\\x31\\x75\\x59\\x5b\\x51\\x04\\xe1\\x00\\x23\\x21\\x44\\x03\\xea\\xab\\x44\\x13\\xbe\\xc5\\x50\\x6f\\xff\\xdb\\x55\\x56\\xff\\xda\\x0e\\x07\\xa6\\x10\\x25\\xfa\\xca\\xd5\\x6a\\x91\\x1b\\x56\\x54\\x40\\x09\\x6c\\x10\\xf0\\x39\\x53\\x18\\x62\\x03\\xf4\\x95\\x50\\x00\\x22\\x00\\x6a\\xb5\\xac\\xac\\x69\\x80\\x0e\\x44\\x40\\x16\\x5c\\x40\\x80\\x74\\x15\\xc8\\x25\\xd0\\xb4\\xb5\\x63\\x60\\x22\\x00\\xb2\\xb6\\x71\\x01\\xc3\\xc0\\xaa\\xa3\\xa0\\x75\\x5a\\x9a\\xab\\x80\\x1a\\xd1\\x88\\x3d\\x29\\x04\\xfb\\x4d\\x19\\x76\\x26\\x96\\xd3\\xa6\\xd4\\xda\\x81\\x22\\x08\\x0f\\x1f\\x82\\x20\\x1f\\x4a\\x20\\x13\\x2d\\xaf\\x10\\x1d\\x5a\\x2c\\x85\\xa5\\xaa\\xd5\\x80\\x40\\x88\\x06\\xd5\\x08\\x0e\\xfe\\x84\\x41\\x60\\x02\\xc7\\x08\\x00\\x08\\x81\\x6f\\xb0\\x44\\x1d\\x25\\x04\\x32\\x0d\\xa6\\xad\\xa6\\xca\\xd5\\x04\\x02\\xea\\xdc\\xa7\\x1f\\x82\\xaa\\x99\\x41\\xd3\\x10\\xc3\\x35\\x82\\x20\\x4f\\x53\\x5a\\xd4\\xc5\\xaa\\x11\\x5d\\x2b\\xb0\\x25\\x68\\x59\\xa1\\x02\\x59\\x6c\\xae\\x96\\x33\\x55\\xa0\\xda\\x48\\xc0\\x88\\x03\\xca\\x88\\x11\\x41\\x83\\xa9\\xaa\\x5a\\x6b\\x34\\x01\\x00\\x75\\x60\\x50\\x35\\x54\\x30\\x4a\\x44\\x6a\\x16\\x9b\\x2c\\x02\\x34\\x41\\x0f\\x53\\x59\\xd2\\x08\\x02\\xdf\\xb1\\x51\\xb4\\x59\\x04\\x00\\x8f\\x01\\x00\\x05\\x6a\\x74\\x84\\x61\\x39\\x8a\\x18\\x80\\x1a\\xa0\\x80\\x40\\xe8\\x55\\xa0\\x10\\x24\\x03\\x98\\xa1\\x88\\x03\\x8c\\x98\\x81\\xab\\x08\\x01\\xca\\x98\\x42\\xbf\\x88\\x0e\\xfb\\x0e\\x82\\xb4\\xc5\\x20\\x0a\\x40\\x84\\x00\\xd5\\x6b\\x4c\\x40\\x83\\xe7\\x7f\\xfa\\xda\\xa1\\x00\\x35\\x98\\x00\\x80\\x67\\x22\\x20\\x00\\x7a\\xaf\\xb0\\x47\\x00\\xd4\\x20\\xb6\\x90\\x28\\x35\\x6d\\x4d\\x98\\x40\\x16\\x9c\\x40\\x7f\\x94\\x40\\x15\\x5b\\x2b\\x56\\xd3\\x08\\x03\\xab\\x08\\x02\\xd7\\x88\\x0f\\xd4\\xa6\\x41\\x31\\x82\\x17\\x07\\x2c\\x04\\x04\\x3c\\x0a\\x88\\x26\\x22\\x1f\\xf6\\xc8\\x22\\x00\\xab\\x4a\\x90\\x84\\x02\\xa0\\x90\\xff\\x18\\x41\\x2c\\x04\\x9e\\x04\\x40\\x23\\x10\\x2d\\x2c\\xe8\\x84\\x70\\x80\\x1d\\x2d\\x18\\x2c\\x09\\x00\\x1a\\xd6\\x6b\\x4d\\x96\\xd5\\x66\\x81\\x20\\xe5\\x6b\\x48\\x43\\xbf\\x41\\x30\\xab\\xe2\\x70\\x8c\\x61\\x10\\x41\\x11\\x02\\x00\\x06\\xb5\\xa7\\x21\\x1a\\x20\\x0b\\x4b\\x7f\\x10\\x0a\\x60\\x04\\x40\\x12\\xcc\\x1d\\x2a\\x18\\xdf\\x52\\xe0\\x51\\x38\\x40\\x00\\xb4\\xc2\\xd0\\x80\\x81\\x10\\x8c\\x10\\x0c\\x06\\x0c\\x3a\\x11\\x94\\x30\\x08\\x28\\x53\\x04\\x03\\x32\\x42\\x00\\x05\\xa4\\xab\\x69\\x4c\\xe0\\xb2\\x82\\x10\\x16\\x17\\x0c\\x40\\x0f\\xfb\\x2b\\x55\\x10\\x09\\x15\\xaa\\xda\\x84\\x01\\x98\\xcb\\x0b\\x87\\x9f\\x1f\\x83\\xa9\\xa2\\x88\\x43\\xd2\\x2a\\x02\\x52\\x82\\x20\\x45\\xba\\x19\\x8c\\x4d\\x28\\x70\\x25\\x28\\x20\\x00\\x50\\x85\\x7f\\x42\\xe1\\x95\\x02\\x0b\\x88\\xc0\\x04\\x4c\\x10\\xb4\\x37\\x41\\x5f\\xe1\\x00\\xfa\\x82\\x10\\x79\\x60\\xe8\\x3a\\x90\\x60\\x62\\x04\\xcf\\x41\\x88\\x01\\x23\\x82\\xac\\x10\\x40\\x78\\x6c\\x31\\x28\\x95\\xad\\x4d\\xa4\\x0c\\x1b\\x9c\\xb1\\x00\\x63\\xc1\\x35\\x59\\x50\\x40\\x41\\xd0\\x48\\x02\\x08\\x10\\x09\\x89\\xa5\\xaa\\xda\\x84\\x61\\x64\\x55\\xa2\\x98\\x8e\\x00\\x0a\\x21\\x05\\x4e\\x10\\x8c\\x16\\x28\\x62\\x05\\x43\\x42\\x69\\x6d\\x48\\x41\\x04\\x04\\xff\\xc4\\x07\\x6a\\x6b\\x29\\x01\\x04\\x0c\\xa9\\x46\\x10\\x2a\\x9e\\x11\\x4a\\x08\\x00\\x2d\\x58\\x80\\xaf\\x50\\x78\\x70\\x40\\x2c\\xd1\\x04\\xa2\\x08\\x17\\x3f\\x06\\x04\\x13\\x4e\\x20\\x29\\x8c\\x3e\\xac\\x40\\x36\\xa9\\x8a\\x1e\\xbc\\x40\\x52\\x10\\x6d\\x49\\x28\\x38\\xd0\\x81\\x4f\\xb1\\xd0\\x61\\x00\\x41\\xb0\\xc0\\x02\\x6f\\xc4\\x05\\xff\\xff\\xad\\xf0\\x6f\\xe8\\xc1\\x6a\\xc2\\x05\\x55\\xa4\\xd5\\x44\\x03\\x87\\xd3\\x10\\x07\\x65\\x10\\x3d\\xa9\\xb4\\xb1\\x84\\x48\\x88\\x20\\x59\\x4a\\x36\\x90\\x40\\xa7\\x68\\x40\\x0b\\x18\\x7c\\xb8\\x81\\x8c\\xb0\\x80\\x5a\\xb0\\x81\\x4f\\xd6\\xab\\x51\\xaa\\xd2\\x88\\x05\\xad\\x08\\x16\\x20\\x83\\xa5\\x52\\x89\\xa5\\xb5\\x88\\x18\\xd4\\xa1\\x04\\xca\\xb1\\x55\\x10\\x06\\x7d\\x05\\x04\\x20\\x81\\xac\\xa8\\x7c\\x22\\x30\\x22\\x06\\xb4\\x88\\x40\\xb2\\xb6\\xad\\x78\\x81\\x9d\\x29\\x8c\\x2a\\xae\\xa8\\x40\\xd6\\x98\\x7c\\x0e\\x55\\x50\\x08\\x81\\xbd\\x4d\\x56\\x8a\\x05\\x04\\x40\\xaf\\xd4\\x40\\x23\\x14\\x31\\x02\\xeb\\xc0\\x44\\x03\\xef\\xc4\\x0a\\xd5\\x44\\x01\\x69\\x43\\xe1\\xea\\x43\\xea\\x7f\\xff\\xda\\x5b\\xf8\\x80\\x63\\x0a\\xa2\\x00\\x75\\x5f\\xf0\\xd8\\x46\\x06\\x00\\x1f\\x80\\x3f\\x00\\x7e\\x00\\xfc\\x01\\xf8\\x03\\xe0"
        `,
        CorruptionToggle: `
            "Camera Corruption": {
                value: settings.camera.corruption,
				format: a => a ? "On" : "Off",
				onchange: a => {
					settings.camera.corruption = a; // Save setting
					saveSettings();
				}
			},
        `
    },

    // 'replace' objects replace entire blocks
    replace: {
        ScrollFix: `a = E.clip(a - b, 0, 3), a != c && Pip.knob1Click(b), d()`
    }
};
